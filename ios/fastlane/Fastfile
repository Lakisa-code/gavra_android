default_platform(:ios)

platform :ios do
  desc "Upload IPA to TestFlight"
  lane :upload_testflight do
    setup_ci if ENV['CI']
    
    # Upload to TestFlight using Apple ID credentials
    pilot(
      ipa: "build/ios/ipa/gavra_android.ipa",
      skip_waiting_for_build_processing: false,
      skip_submission: false,
      distribute_external: false,
      notify_external_testers: false,
      changelog: "Bug fixes and improvements"
    )
    
    UI.success("âœ… Build uploaded to TestFlight!")
  end
end